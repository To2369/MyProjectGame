<!--
UNIT05_LEARNING UNIT05 学習要項
SPRITE - TEXTURE

<span style="color:#994433;border: 1px red solid; padding: 2px;font-size:100%;font-weight: bold;">

DirectXTK
Texture space
Texel space
Sampler state
-->

# UNIT05 SPRITE - TEXTURE 学習要項

---

今回はピクセルシェーダーの処理周りにテクスチャ周りの設定を追加していきます。

ただ、画像ファイルの読み込みからテクスチャの生成の実装は結構難しいので、今回は DirectXTK を利用してスムーズにテクスチャの生成を行っていきます。

@import "images/DirectXTK.png"

今回の演習結果は下記のようになります。

@import "images/実行結果.png"


---

### <span style="color:#334488;">DirectXTK</span>
#### <span style="color:#334488;">DirectX Tool Kit</span>

DirectXでのゲームづくりでめんどくさいことを​支援してくれるライブラリ。
今回は画像の読み込み＆テクスチャ作成に使用します。

---

### <span style="color:#334488;">Texture space</span>
#### <span style="color:#334488;">テクスチャ</span>

テクスチャとはポリゴンの質感を表現する模様データ。

使い方によっては模様を表現するだけでなく、凹凸を表現したり、​明るさを変えたりするために使用されることもある。

・通常のテクスチャ　　　　 ・凸凹表現用のテクスチャ
@import "images/テクスチャ01.png"
@import "images/テクスチャ02.png"


---

### <span style="color:#334488;">Texel space</span>
#### <span style="color:#334488;">テクセル</span>

画像ファイルを読み取った後の画素の値を格納している２次元配列の事を**テクスチャバッファ**と呼びます。

この配列内の１つ１つの点の事を**テクセル**と呼びます。

外部ファイルを読み込む場合、まずはファイルを読み取って各色の情報の値を**テクスチャバッファ**にコピーしていきます。

テクスチャバッファは縦横の画素数を持つ２次元配列ですが、それぞれの画素には RGB データ、場合によっては α 値が含まれます。α 値を含んだテクスチャは透明になります。

RGB (もしくは RGBA )併せて１つの点の情報として「**テクセル**」です。

ただし、この画素の値である **テクセル** も、そのままでは単なる数値の羅列として認識されてしまいます。

    255,255,255,255,122,122,122,255,...

この数値の羅列が色の情報でありテクスチャだよという事を CPU, GPU に説明してやることで初めて、色の情報として扱えるようになります。

<span style="color:#994433;font-size:80%;font-weight: bold;">TIPS : ピクセルとテクセルの違いを理解しておこう</span>

---

### <span style="color:#334488;">Sampler state</span>
#### <span style="color:#334488;">サンプラーステート</span>

サンプラーステートとはテクスチャの色をどのように取り出すかの設定です。それぞれコストと質が違います。
コストとは速度の事で、質とは画質の良さの事です。


##### <span style="color:#222299;">◇ Point Filter<br>ポイントフィルター</span>
最も安価で、表示品質は一番安い。
ピクセルに対して複数の色があったとしても隣の色を考慮して混ぜ合わせたりしない。

##### <span style="color:#222299;">◇ Liner Filter<br>リニアフィルター</span>
ピクセルに対して複数の色がある場合、隣の色を混ぜ合わせて表示するので色のつながりが滑らかになる。
ただし２Dのみに対応。

##### <span style="color:#222299;">◇ Anisotropic Filter<br>アニソトロピックフィルター</span>
最も高価で、表示品質は一番高い。
やっていることはリニアフィルターと同じだがカメラの値にも対応。つまり遠くや回転した画面に表示されているテクスチャにもリニアフィルターを適応させることができる。

@import "images/サンプラーステート.png"

#### ◇ ミップマップ

カメラから遠いほど小さいテクスチャが使われる。

@import "images/ミップマップ.png"

ミップマップはテクスチャから画像のチェーンを生成するプロセスであり、チェーン内の各画像は、ミップマップチェーン内の前の画像の半分のサイズです。以下の画像は、この手法を示しています。

サイズ1024×1024のテクスチャのミップマップチェーンを生成するために、画像サイズはミップマップチェーンの次のレベルで半分になり、このプロセスは、両方の次元のテクスチャのサイズが1になるまで繰り返されます。